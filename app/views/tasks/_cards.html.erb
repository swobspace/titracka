<div data-controller="toggle" data-toggle-toggle-class="hidden">
  <span class="float-end clapse btn" data-action="click->toggle#toggleAll">
    <i class="clapse" data-toggle-target="content"></i>
  </span>
<%= content_tag :div, class: :row, id: 'tasksCardboard', 
      data: { 
        controller: 'draggable',
        filter: filter,
        url: url
      } do %>
  <% columns.each do |column| %>
    <div class='card-deck col px-1'>
      <div class='card border-0'>
        <div class="card-header text-center border d-flex justify-content-between" data-controller="task">
          <%= column.name %>
          <% if ability.can? :create, Task %>
            <%= link_to icon_new,
                        new_polymorphic_path([column, :task]),
                        title: t('actions.add', model: Task.model_name.human),
                        data: {
                          controller: :modal,
                          'modal-modal-id-value': 'sharedModal',
                          action: 'click->modal#open',
                          'turbo-frame': "modal-body"
                        }
             %>
          <% end %>
        </div>

        <%= content_tag :ul, class: 'list-group list-group-flsh dropzone px-2 bg-light', data: { id: column.id, "draggable-target": 'column' } do %>
          <%= render(tasks_per_column[column.id], column: column, ability: ability) if tasks_per_column[column.id].present? %>
        <% end %>
      </div>
    </div>
  <% end %>
<% end %>

</div>
