<%= simple_form_for([task, task.notes.new],
      remote: true,
      data: {
        action: "ajax:success->form#onPostSuccess ajax:error->form#onPostError"
      }
    ) do |f| %>
    <h5 class="bt mt-3"><%= t('actions.add', model: t('activerecord.models.note')) %></h5>

    <%= f.input :description, as: :rich_text_area,
          wrapper: :vertical_form, label: false
       %>

    <div class="form-group row">
      <%= label_tag :mail_to, t('attributes.mail_to'), class: "form-label col-sm-2" %>
      <div class="col-sm-10">
        <%= select_tag "mail_to", 
              options_for_select(mailaddresses_for_select(task, current_user)),
              prompt: t('titracka.no_email'),
              class: 'form-control'
        %>
      </div>
    </div>

    <div class="form-group row">
      <%= label_tag "email subject prefix", nil, class: "col-sm-2" %>
      <div class="col-sm-10">
        <div class="form-check">
          <%= radio_button_tag :subject_prefix, "task_id", class: "form-check-input" %>
          <%= label_tag :subject_prefix, "Titracka task id", class: "form-check-label" %>
        </div>
        <% task.cross_references.each do |xref| %>
          <div class="form-check">
            <%= radio_button_tag :subject_prefix, xref.identifier, class: "form-check-input" %>
            <%= label_tag :subject_prefix, xref.to_s, class: "form-check-label" %>
          </div>
        <% end %>
      </div>
    </div>

    <div data-form-target="errorSuccess" class="" role="alert"></div>
    <div role="toolbar" class="">
      <%= f.button :submit, class: 'btn btn-primary' %>
    </div>
<% end %>

